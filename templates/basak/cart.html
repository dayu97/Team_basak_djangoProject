<!DOCTYPE html>
{% load static %}
{% static "" as baseUrl %}


<html>



<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="google-translate-customization"
	content="6f1073ba568f1202-9c8990a4b3025b3e-ga74e3ea243d3f01d-14"></meta>
<!-- ì„¸ê³„ ì–¸ì–´ì„ íƒ ë©”íƒ€ íƒœê·¸ -->


<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>
<!-- <script type="text/javascript" src="./cart.js"></script> -->

<title>ì¥ë°”êµ¬ë‹ˆ</title>
<link rel="stylesheet" type="text/css" href="{{baseUrl}}/css/cart.css">

<script>
//ì²´í¬ë°•ìŠ¤ í´ë¦­ì—ë”°ë¥¸ ìˆ˜ëŸ‰&ê°€ê²©ë³€ë™ í•¨ìˆ˜ì„ ì–¸
var checkResult = function(){

	//ê°œë³„ì„ íƒ ì²´í¬ë°•ìŠ¤ì— ë”°ë¥¸ ì „ì²´ì„ íƒ ì²´í¬ë°•ìŠ¤ ë³€í™”
	if( $("input[name=cartList]").length == $("input[name=cartList]:checked").length ){
		$('#allCheck1').prop("checked", true);
	}else{
		$('#allCheck1').prop("checked", false);
	}

	//ì²´í¬ë°•ìŠ¤ì— ë”°ë¥¸ ìˆ˜ëŸ‰&ê°€ê²©
	var count = 0;
	var totPrice = 0;
	var carryPrice = 3000;
	var cnt = 0;

	$("[id^=count]").each(function(){
		if( $('input[name=cartList]:eq(' + cnt + ')').is(':checked') ){
			count = count + parseInt($(this).text().split("ê°œ")[0])
		}
		cnt++
	})

	cnt = 0
	$("[id^=tot_price]").each(function(){
		if( $('input[name=cartList]:eq(' + cnt + ')').is(':checked') ){
			totPrice = totPrice + parseInt($(this).text().split("ì›")[0])
		}
		cnt++
	})

	//30ê°œ ì´ˆê³¼ì‹œë§ˆë‹¤ ë°°ì†¡ë¹„ 3ì²œì› ë¶€ê³¼
	temp = count
	if(temp >= 30){
		while(temp >=30){
			temp = temp-30;
			carryPrice = carryPrice + 3000
		}
	}

	//5ë§Œì› ì´ìƒ ë°°ì†¡ë¹„ ë¬´ë£Œ
	if ( totPrice >= 50000 ){
		carryPrice = 0;
	}

	$('#totalGoodsCnt').text(count)
	$('#totalGoodsPrice').text(totPrice)
	$('#totalSettlePrice').text(totPrice+carryPrice)
	$('#totalDeliveryCharge').text(carryPrice)
}


$(document).ready(function(){

	//ì²« ìˆ˜ëŸ‰&ê°€ê²©
	checkResult()

	//ì „ì²´ì„ íƒ ì²´í¬ë°•ìŠ¤
	$('#allCheck1').change(function(){
		if( $("#allCheck1").is(':checked') ){
		  $("input[name=cartList]").prop("checked", true);
		}else{
		  $("input[name=cartList]").prop("checked", false);
		}
		checkResult()
	})

	//ê°œë³„ì„ íƒ ì²´í¬ë°•ìŠ¤
	$('input[name=cartList]').change(function(){
		checkResult()
	})

	//ì„ íƒìƒí’ˆ ì‚­ì œ
	$('.btn_order_choice_del').click(function(){
		if(confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == true){
			var cart_id = "";

			$("input[name=cartList]:checked").each(function(){
				cart_id = cart_id + ',' + $(this).next().val()
			})
			cart_id = cart_id.substr(1,)

			$.ajax({
				type : 'GET',
				url : "delete?cart_id=" + cart_id,
				success : function(){
					alert("ì„ íƒ í•­ëª©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!!")
					location.href="cart";
				},
				error : function(){
					alert("ì—ëŸ¬");
				}
			});
		}else{
			return;
		}
	})

	//ì„ íƒìƒí’ˆ ì£¼ë¬¸
	$('.btn_order_whole_buy').click(function(){
		if(confirm("ì£¼ë¬¸ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?") == true){
			var cart_id = "";
			$("input[name=cartList]:checked").each(function(){
				cart_id = cart_id + ',' + $(this).next().val()
			})
			cart_id = cart_id.substr(1,)
			location.href="pay?cart_id=" + cart_id
		}else{
			return;
		}
	})
})

</script>

</head>


<body>

	<div class="box_dashed" style="margin-left: auto; margin-right: auto;">
		<div class="icon_img">
			<div class="img" style="font-size:30px">
				ğŸ›’
			</div>
		</div>
		<ul>
			<li>ê¹Œê¹Œë‚˜ë¼ëŠ” 5ë§Œì› ì´ìƒ êµ¬ë§¤ì‹œ ë¬´ë£Œë°°ì†¡ì„ ì§€ì›í•´ ë“œë¦¬ê³  ìˆìŠµë‹ˆë‹¤ğŸ¥°<li>
			<li>ì¥ë°”êµ¬ë‹ˆì— ë‹´ì€ ìƒí’ˆë“¤ì„ í•œêº¼ë²ˆì— ì£¼ë¬¸ ì‹œ ë¬¶ìŒ ë°°ì†¡ì„ í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
			<li>ë”°ë¡œ ë”°ë¡œ ì—¬ëŸ¬ë²ˆ ê²°ì œ ì‹œ ì¤‘ë³µ ê³„ì‚°ëœ ë°°ì†¡ë¹„ëŠ” ê²Œì‹œíŒìœ¼ë¡œ ë¬¸ì˜ ì£¼ì‹œë©´ í™˜ë¶ˆ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤â£</li>
		</ul>
	</div>
	<div class="sub_content">
		<!-- //side_cont -->
		<div class="content_box">
			<div class="order_wrap" style="margin-left: auto; margin-right: auto;">
				<div class="order_tit">
					<h2>ì¥ë°”êµ¬ë‹ˆ</h2>
					<ol>
						<li class="page_on"><span>01</span> ì¥ë°”êµ¬ë‹ˆ <span>&nbsp;ğŸ‘‰&nbsp;</span></li>
						<li><span>02</span> ì£¼ë¬¸ì„œì‘ì„±/ê²°ì œ<span>
						&nbsp;ğŸ‘‰&nbsp;</span></li>
						<li><span>03</span> ì£¼ë¬¸ì™„ë£Œ</li>
					</ol>
				</div>
				<!-- //order_tit -->
				<div class="cart_cont">
					<form id="frmCart" name="frmCart" method="post" target="ifrmProcess">
<!-- 						
						<-- ì¥ë°”êµ¬ë‹ˆ ìƒí’ˆë¦¬ìŠ¤íŠ¸ ì‹œì‘ -->
						<div class="cart_cont_list">
							<div class="order_cart_tit"></div>
							<!-- //order_cart_tit -->
							<div class="order_table_type">
								<table style="margin-left: auto; margin-right: auto;">
									<colgroup>
										<col style="width: 3%">
										<!-- ì²´í¬ë°•ìŠ¤ -->
										<col style="width: auto">
										<!-- ìƒí’ˆëª…/ì˜µì…˜ -->
										<col style="width: 13%">
										<!-- ìˆ˜ëŸ‰ -->
										<col style="width: 10%">
										<!-- ìƒí’ˆê¸ˆì•¡ -->
										<col style="width: 13%">
										<!-- í•©ê³„ê¸ˆì•¡ -->
										<col style="width: 15%">
										<!-- ë°°ì†¡ë¹„ -->
									</colgroup>
									<thead>
										<tr>
											<th>
												<div class="form_element">
													<input type="checkbox" id="allCheck1"
														class="gd_select_all_goods" data-target-id="cartSno1_"
														data-target-form="#frmCart" checked="checked"> <label
														for="allCheck1" class="check_s on"></label>
												</div>
											</th>
											<th>ìƒí’ˆ/ì˜µì…˜ ì •ë³´</th>
											<th>ìˆ˜ëŸ‰</th>
											<th>ìƒí’ˆê¸ˆì•¡</th>
											<th>í•©ê³„ê¸ˆì•¡</th>
											<th>ë°°ì†¡ë¹„</th>

										</tr>
									</thead>
									<tbody>

									<input type="hidden" id="sessionMid" value="{{mid}}">


				{% if cartList != None %}
					{% for list in cartList %}
										<tr>
											<td class="td_chk">
												<div class="form_element">
													<input type="checkbox" id="cart_add" name="cartList" checked="checked">
													<input type="hidden" id="pid" value="{{list.5}}">
													<label for="cartSno1_339855" class="check_s on"></label>
												</div>
											</td>
											<td class="td_left">
												<div class="pick_add_cont">
													<span class="pick_add_img"> 
															<img
															src="{{baseUrl}}/img/product_over_{{list.4}}.png"
															width="100" alt="{{list.3}}" title="{{list.3}}"
															class="middle">
													
													</span>
													<div class="pick_add_info">

														<em><a href="">{{list.3}}</a></em>
														<div class="pick_option_box"></div>
														<div class="pick_option_box"></div>
													</div>
												</div> 
											</td>
											<td class="td_order_amount">
												<div class="order_goods_num">
													<strong id="count{{forloop.counter0}}">{{list.0}}ê°œ</strong>
												</div>
											</td>
											<td><strong class="order_sum_txt price">{{list.1}}ì›</strong>
												<p class="add_currency"></p></td>

											<!-- JS -->
											<td><strong class="order_sum_txt" id="tot_price{{forloop.counter0}}">{{list.2}}ì›</strong>
												<p class="add_currency"></p></td>
											<td class="td_delivery" rowspan="1">30ê°œë§ˆë‹¤ ë¶€ê³¼<br>
												3,000ì› <br> (íƒë°°) <br>
											</td>
										</tr>

					{% endfor %}


									</tbody>

								</table>
							</div>
						</div>

				{% else %}

						<p class="no_data">ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¨ìˆëŠ” ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>

				{% endif %}
					</form>
					<br/><br/><br/>
					<div class="price_sum" style="margin-left: auto; margin-right: auto;">
						<div class="price_sum_cont">
							<div class="price_sum_list" >
								<dl>
									<dt>
										ì´ <strong id="totalGoodsCnt">1</strong> ê°œì˜ ìƒí’ˆê¸ˆì•¡
									</dt>
									<dd>
										<strong id="totalGoodsPrice">0</strong>ì›
									</dd>
								</dl>
								<span>&nbsp;â•&nbsp;</span>
								<dl>
									<dt>ë°°ì†¡ë¹„</dt>
									<dd>
										<strong id="totalDeliveryCharge">0</strong>ì›
									</dd>
								</dl>
								<span>&nbsp;â–¶&nbsp;</span>
								<dl class="price_total">
									<dt>í•©ê³„</dt>
									<dd>
										<strong id="totalSettlePrice">0</strong>ì›
										<div class="add_currency">
											<em id="totalSettlePriceAdd"></em>
										</div>
									</dd>
								</dl>
							</div>
							<em id="deliveryChargeText" class="tobe_mileage"></em>
						</div>
						<!-- //price_sum_cont -->
					</div>
					<!-- //price_sum -->
				</div>
				<!-- //cart_cont -->
			</div>
			<!-- //order_wrap -->
		</div>
		<!-- //content_box -->
		<div class="btn_order_box">
			<span class="btn_left_box">

				<button type="button" class="btn_order_choice_del">ì„ íƒ ìƒí’ˆ ì‚­ì œ</button>
				<a href="/basak">
				<button type="button" class="">ì‡¼í•‘ ê³„ì† í•˜ê¸°</button></a>
			</span> 
			<span class="btn_right_box">
				<a><button type="button" class="btn_order_whole_buy" >ìƒí’ˆ ì£¼ë¬¸</button></a>
			</span>
		</div>

	</div>



</body>
</html>

